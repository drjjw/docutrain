<!-- DocuTrain Embed Stylesheet -->
<link rel="stylesheet" href="https://www.docutrain.io/css/docutrain-embed.css">

<script src="/content/pdf/core/lib/webviewer.min.js" type="text/javascript"></script>

<p style="text-align: left;"><span style="font-size: 12pt;"><strong><span>If you are having trouble viewing this resource or to download, please <a href="https://ukidney.com/content/manuals/smh/SMH%20Nephrology%20Housestaff%20Manual-2023.pdf" target="_blank" rel="noopener" class="">click here</a></span></strong></span></p>

<!-- Two Options Side by Side -->
<div class="manual-options">
	<div class="option-card">
		<div class="option-icon"><i class="fa-solid fa-book-open"></i></div>
		<h3>View Manual</h3>
		<p>Read the full PDF manual</p>
		<a href="#modal-full" class="uk-button uk-button-primary" uk-toggle>
			<i class="fa-solid fa-book-open"></i> Open PDF
		</a>
	</div>
	
	<div class="option-card">
		<div class="option-icon"><i class="fa-solid fa-message"></i></div>
		<h3>Chat with Manual (Powered by AI)</h3>
		<p>Ask questions with AI assistant</p>
		<button class="uk-button uk-button-primary" onclick="openDocutrainChat()">
			<i class="fa-solid fa-message"></i> Open Chat
		</button>
	</div>
</div>

<!-- PDF Modal -->
<div id="modal-full" class="uk-modal-container" uk-modal esc-close="true">
	<div class="uk-modal-dialog">
		<button type="button" class="uk-modal-close-full uk-close-large" uk-close></button>
		<div id="viewer" style="height: 100vh;"></div>
	</div>
</div>

<!-- DocuTrain Chat Modal - Standard Embed Implementation -->
<div id="docutrain-chat-modal" class="docutrain-modal-overlay" style="display: none;">
	<div class="docutrain-modal-container">
		<button 
			class="docutrain-close-button" 
			type="button" 
			onclick="closeDocutrainChat()" 
			aria-label="Close chat"
		>
			<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
				<line x1="18" y1="6" x2="6" y2="18"></line>
				<line x1="6" y1="6" x2="18" y2="18"></line>
			</svg>
		</button>
		<iframe 
			id="docutrain-chat-iframe"
			src=""
			class="docutrain-chat-iframe"
			allow="clipboard-write"
			title="Chat Assistant">
		</iframe>
	</div>
</div>

<!-- About Section -->
<div style="text-align: left; margin-top: 40px;">
	<div><strong>About this manual:</strong></div>
	<div>A nephrology housestaff manual intended for trainees rotating through St. Michael's Hospital.</div>
	<div>For Questions about this manual, please email <a href="mailto:jeffrey.zaltzman@utoronto.ca" target="_self">Dr. Jeffrey Zaltzman</a> (St. Michael's Hospital)</div>
	<div>See also: <a href="nephrology-publications/nephrology-manuals/university-health-network-nephrology-manual">University Health Network Nephrology Manual</a></div>
</div>

<!-- DocuTrain Embed Container -->
<div class="docutrain-embed-container" data-chat-url="https://www.docutrain.io/app/chat?doc=smh&footer=false"></div>

<script type="text/javascript">
	// Initialize PDF Viewer
	WebViewer({
		path: '/content/pdf/core/lib',
		licenseKey: '5sWIr8PdBc1Y2NPyyFtk',
		initialDoc: 'https://ukidney.com/content/manuals/smh/SMH%20Nephrology%20Housestaff%20Manual-2023.pdf',
	}, document.getElementById('viewer'))
	.then((instance) => {
		const { documentViewer, annotationManager } = instance.Core;
		instance.UI.setTheme('light');
	});

	// Listen for header collapse messages from iframe
	window.addEventListener('message', function(event) {
		// Verify origin for security
		if (event.origin !== 'https://www.docutrain.io') return;
		
		if (event.data.type === 'headerCollapsed') {
			// Could add parent-level handling here if needed
			console.log('Header collapsed state:', event.data.collapsed);
		}
	});
</script>

<!-- DocuTrain Embed JavaScript -->
<script src="https://www.docutrain.io/js/docutrain-embed.js"></script>

<style>
	/* Two Options Side by Side */
	.manual-options {
		display: grid;
		grid-template-columns: 1fr;
		gap: 20px;
		margin: 40px 0;
	}
	
	@media (min-width: 768px) {
		.manual-options {
			grid-template-columns: 1fr 1fr;
			max-width: 100%;
		}
	}
	
	.option-card {
		background: #f9f9f9;
		border: 2px solid #e5e5e5;
		border-radius: 12px;
		padding: 40px 30px;
		text-align: center;
		transition: all 0.3s ease;
	}
	
	.option-card:hover {
		border-color: #cc0000;
		box-shadow: 0 4px 12px rgba(204, 0, 0, 0.15);
		transform: translateY(-2px);
	}
	
	.option-icon {
		font-size: 48px;
		color: #cc0000;
		margin-bottom: 20px;
	}
	
	.option-card h3 {
		font-size: 24px;
		margin: 0 0 10px 0;
		color: #333;
	}
	
	.option-card p {
		color: #666;
		margin-bottom: 25px;
		font-size: 16px;
	}
	
	.option-card .uk-button {
		padding: 8px 20px;
		font-size: 14px;
	}
	
	
	/* ===== PDF MODAL STYLES (unchanged) ===== */
	.uk-modal-close-full {
		bottom: 0 !important;
		left: 0;
		width: 50px;
		height: 50px;
		top: auto;
		z-index: 1000;
	}

	.uk-close {
		color: #ffffff;
		background: #cc0000 !important;
	}

	.uk-close:hover {
		color: pink;
	}

	.uk-modal-container {
		padding-top: 0;
	}

	.uk-modal.uk-open {
		overflow: hidden;
	}
	
	/* Prevent body scroll when UIKit modal is open */
	body.uk-modal-page {
		overflow: hidden;
	}
</style>